{
  "name": "Shopify Customer Support Chatbot",
  "nodes": [
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "id": "59086b30-b472-452f-b145-0ac09ed41382",
      "name": "Conversation Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        496,
        208
      ]
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Use this tool to look up order details, status, and tracking information. Requires an order ID or order number.",
        "authentication": "accessToken",
        "operation": "get",
        "orderId": "={{ $fromAI('orderId', 'The order ID or order number to look up', 'string') }}",
        "options": {}
      },
      "id": "aebae041-ab8c-49a4-bd2a-8e1adb0c3289",
      "name": "Shopify Order Lookup",
      "type": "n8n-nodes-base.shopifyTool",
      "typeVersion": 1,
      "position": [
        656,
        208
      ],
      "credentials": {
        "shopifyAccessTokenApi": {
          "id": "s8hmoW8Pys1T71da",
          "name": "Shopify Access Token account"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Use this tool to look up customer information including email, phone, and order history. Requires a customer ID.",
        "authentication": "accessToken",
        "resource": "customer"
      },
      "id": "fdee68df-7d8c-4560-aff3-092953418fd0",
      "name": "Shopify Customer Lookup",
      "type": "n8n-nodes-base.shopifyTool",
      "typeVersion": 1,
      "position": [
        784,
        208
      ],
      "credentials": {
        "shopifyAccessTokenApi": {
          "id": "s8hmoW8Pys1T71da",
          "name": "Shopify Access Token account"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Use this tool to search for products by name or get product details. Provide a product name or search term, and I will find matching products in the store.",
        "authentication": "accessToken",
        "resource": "product",
        "operation": "getAll",
        "limit": 5,
        "additionalFields": {}
      },
      "id": "7521a495-a3fd-4a9e-bb41-bccd6f10c952",
      "name": "Shopify Product Lookup",
      "type": "n8n-nodes-base.shopifyTool",
      "typeVersion": 1,
      "position": [
        912,
        208
      ],
      "credentials": {
        "shopifyAccessTokenApi": {
          "id": "s8hmoW8Pys1T71da",
          "name": "Shopify Access Token account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "reply",
              "value": "={{ $json.output || $json.text || $json.data?.[0]?.response }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "69d0fcac-99cf-4b86-90d7-bdd6cb350d64",
      "name": "Format Reply",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1120,
        -16
      ]
    },
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "2be6871f-531a-4363-83e9-d8e8833814c5",
      "name": "When chat message received",
      "webhookId": "3f0fe3a9-9caa-42e9-a7fe-6b86efed402e"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7af5f3d5-28ec-48ef-a101-fb8921c75280",
              "name": "storeName",
              "value": "https://nr1jse-uj.myshopify.com",
              "type": "string"
            },
            {
              "id": "b3f72e79-861a-491d-8bff-fee28faf0a76",
              "name": "supportEmail",
              "value": "muhammadaetzaz36@gmail.com",
              "type": "string"
            },
            {
              "id": "2989bd0f-9189-4041-a5ab-8850376fd6f0",
              "name": "returnPolicyDays",
              "value": "30",
              "type": "string"
            },
            {
              "id": "a8753f52-8a27-49a1-8c7a-63bd5eb6c969",
              "name": "shippingInfo",
              "value": "Standard shipping takes 5-7 business days. Express shipping takes 2-3 business days.",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        208,
        0
      ],
      "id": "a7f673e9-21db-4d15-85bb-567933b60e57",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a helpful customer support assistant for {{$('Workflow Configuration').first().json.storeName}}.\n\nYour role is to:\n- Answer customer questions about products, orders, shipping, and returns\n- Track order status using the Shopify Order Lookup tool\n- Look up customer information using the Shopify Customer Lookup tool\n- Provide product details using the Shopify Product Lookup tool\n- Assist with return requests and provide return policy information\n- Be friendly, professional, and empathetic\n\nImportant guidelines:\n- Always verify order numbers and customer details before providing sensitive information\n- For returns: Our return policy allows returns within {{$('Workflow Configuration').first().json.returnPolicyDays}} days of purchase\n- For shipping inquiries: {{$('Workflow Configuration').first().json.shippingInfo}}\n- If you cannot resolve an issue, offer to escalate to {{$('Workflow Configuration').first().json.supportEmail}}\n- Use the available Shopify tools to fetch real-time data when customers ask about orders, products, or their account\n\nProvide clear, concise, and helpful responses.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        416,
        0
      ],
      "id": "3db8721d-e190-4edd-b412-43e21d99d6a1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        288,
        208
      ],
      "id": "d211f17d-2d54-47c1-8565-fa04d06613f0",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "CwI9L1ewdSwSJeYl",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Conversation Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Shopify Order Lookup": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Shopify Customer Lookup": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Shopify Product Lookup": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a9fb7024-5c0f-46d4-bb35-53477457027b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "ca54f8e8a5588905cf87f2dde2c46bca33cd728e74f00f89b79a7a45119edf10"
  },
  "id": "qbRvvjz0jl2enOwA",
  "tags": []
}